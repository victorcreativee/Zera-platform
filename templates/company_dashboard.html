{% extends 'base.html' %}
{% block title %}Company Dashboard{% endblock %}
{% block content %}
  <div class="dashboard">
    <h2>Welcome, {{ company.name }}</h2>

    <a href="{{ url_for('company.add_product') }}" class="button">Add New Product</a>

    {% if products %}
      <h3>Your Products:</h3>
      <ul>
        {% for product in products %}
          <li>
            <strong>{{ product.title }}</strong> - {{ product.description }}
            <br>
            <a href="{{ url_for('company.edit_product', product_id=product.id) }}">Edit</a> |
            <form action="{{ url_for('company.delete_product', product_id=product.id) }}" method="POST" style="display:inline;">
              <button type="submit" onclick="return confirm('Are you sure you want to delete this product?');">Delete</button>
            </form>

            {% if product.reviews %}
              <h4>Reviews:</h4>
              <ul>
                {% for review in product.reviews %}
                  <li><strong>{{ review.user_name }}:</strong> {{ review.content }}</li>
                {% endfor %}
              </ul>
            {% else %}
              <p><em>No reviews yet for this product.</em></p>
            {% endif %}

          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>You havenâ€™t added any products yet.</p>
    {% endif %}
  </div>
{% endblock %}
