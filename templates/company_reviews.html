{% extends 'base.html' %}

{% block content %}
<div class="container mx-auto px-4 py-6">
  <h2 class="text-xl font-bold mb-4">ðŸ“Š Reviews Submitted</h2>

  {% for review in reviews %}
    <div class="bg-white p-4 shadow rounded mb-4">
      <p><strong>Product:</strong> {{ review.product.name }}</p>
      <p><strong>User:</strong> {{ review.author.username }}</p>
      <p><strong>Feedback:</strong> {{ review.content }}</p>
      <p><strong>Rating:</strong> {{ review.rating if review.rating else "Not yet rated" }}</p>
      <p><strong>Points Awarded:</strong> {{ review.points_awarded }}</p>

      {% if review.rating is none %}
      <form action="{{ url_for('rate_review', review_id=review.id) }}" method="POST" class="mt-2">
        <label for="rating">Rate this review:</label>
        <select name="rating" required>
          <option value="">Select Rating</option>
          {% for i in range(1, 6) %}
            <option value="{{ i }}">{{ i }} Star{{ 's' if i > 1 }}</option>
          {% endfor %}
        </select>
        <button type="submit" class="bg-blue-600 text-white px-3 py-1 rounded ml-2">Rate</button>
      </form>
      {% endif %}
    </div>
  {% else %}
    <p>No reviews submitted yet.</p>
  {% endfor %}
</div>
{% endblock %}
