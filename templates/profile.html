{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1 class="text-center my-4">Welcome, {{ current_user.username }}</h1>

    <div class="profile-card">
        <h3>Profile Information</h3>
        <p>Email: {{ current_user.email }}</p>
        <p>Bio: {{ current_user.bio or 'No bio available.' }}</p>
    </div>

    <h2 class="my-4">Your Reviews</h2>

    {% if current_user.reviews %}
    <div class="reviews-grid">
        {% for review in current_user.reviews %}
        <div class="review-card">
            <img src="{{ review.image_url or url_for('static', filename='images/default_product.jpg') }}" alt="Product Image">
            <div class="review-info">
                <h3>{{ review.title }}</h3>
                <p>{{ review.content[:100] }}...</p>
                <div class="review-meta">
                    <span>‚ù§Ô∏è {{ review.likes or 0 }}</span>
                    <span>üëÄ {{ review.views or 0 }}</span>
                </div>

                <!-- Edit and Delete Buttons -->
                <div class="review-actions">
                    <a href="{{ url_for('main.edit_review', review_id=review.id) }}" class="btn btn-warning btn-sm">Edit</a>

                    <form method="POST" action="{{ url_for('main.delete_review', review_id=review.id) }}" class="d-inline">
                        <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this review?');">Delete</button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-center">You haven't submitted any reviews yet.</p>
    {% endif %}
</div>
{% endblock %}
